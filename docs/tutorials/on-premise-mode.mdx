---
title: On-premise mode
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

In this tutorial, we show you how to use [geofences](/geofences) in Radar to show an in-store mode when the user is in a store geofence.

## Steps

### Step 1: Sign up for Radar

If you haven't already, sign up for Radar to get your API key. You can create up to 1,000 geofences and make up to 100,000 API requests per month for free.

<a className="btn btn-large btn-primary" href="https://radar.com/signup">Get API keys</a>

### Step 2: Create geofences

There are a few ways to create geofences:
1. [Create geofences page](https://radar.com/dashboard/geofencing/geofences/new)
2. [CSV import](/geofences#csv-import)
3. [API](/api#upsert-a-geofence)

### Step 3: Initialize the SDK

Initialize the SDK with your publishable API key.

<Tabs
  groupId="initialize"
  defaultValue="swift"
  values={[
    { label: 'Swift', value: 'swift' },
    { label: 'Kotlin', value: 'kotlin' },
    { label: 'Web', value: 'web' },
    { label: 'React Native', value: 'react-native' },
    { label: 'Flutter', value: 'flutter' }
  ]}
>
  <TabItem value="swift">

```swift
import UIKit
import RadarSDK

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {
  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    Radar.initialize(publishableKey: "prj_test_pk_...")

    return true
  }

}
```

  </TabItem>
  <TabItem value="kotlin">

  ```kotlin
  import io.radar.sdk.Radar

  class MyApplication : Application() {

      override fun onCreate() {
          super.onCreate()

          Radar.initialize(this, "prj_test_pk...")
      }

  }
  ```

  </TabItem>
  <TabItem value="web">

```javascript
Radar.initialize('prj_live_pk_...');
```

  </TabItem>
  <TabItem value="react-native">

```javascript
Radar.initialize('prj_live_pk_...');
```

  </TabItem>
  <TabItem value="flutter">

```dart
Radar.initialize('prj_live_pk_...');
```

  </TabItem>

</Tabs>

### Step 4: Request foreground permissions

<Tabs
  groupId="initialize"
  defaultValue="swift"
  values={[
    { label: 'Swift', value: 'swift' },
    { label: 'Kotlin', value: 'kotlin' },
    { label: 'Web', value: 'web' },
    { label: 'React Native', value: 'react-native' },
    { label: 'Flutter', value: 'flutter' }
  ]}
>
  <TabItem value="swift">

```swift
import UIKit
import RadarSDK
import CoreLocation

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate, CLLocationManagerDelegate {

    let locationManager = CLLocationManager()

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        Radar.initialize(publishableKey: "prj_test_pk_...")
        self.locationManager.delegate = self
        self.requestLocationPermissions()

        return true
    }

    func requestLocationPermissions() {
        let status = self.locationManager.authorizationStatus

        if status == .notDetermined {
            self.locationManager.requestWhenInUseAuthorization()
        }
    }

}
```

  </TabItem>
  <TabItem value="kotlin">

```kotlin
TODO(jay): MAKE SURE THIS IS RIGHT


import android.Manifest
import android.app.AlertDialog
import android.content.pm.PackageManager
import android.os.Build

import androidx.core.app.ActivityCompat

import io.radar.sdk.Radar

class MainActivity : AppCompatActivity() {
  private val foregroundLocationPermissionsRequestCode = 1

  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    Radar.initialize(this, "prj_test_pk_...")
    requestLocationPermissions()
  }

  private fun requestLocationPermissions() {
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
      ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.ACCESS_COARSE_LOCATION, Manifest.permission.ACCESS_FINE_LOCATION), foregroundLocationPermissionsRequestCode)
    }
  }

}
```

  </TabItem>
  <TabItem value="web">

  When `Radar.trackOnce()` is called, the browser will automatically prompt for foreground permissions.

  </TabItem>
  <TabItem value="react-native">

```javascript
Radar.requestPermissions(false).then((status) => {
  // status will be "GRANTED_FOREGROUND" if permissions were granted
});
```

Learn about platform-specific permissions in the [iOS SDK documentation](/sdk/ios#request-permissions) and [Android SDK documentation](/sdk/android#request-permissions).

  </TabItem>
  <TabItem value="flutter">

```dart
// status will be "GRANTED_FOREGROUND" if permissions were granted
String status = await Radar.requestPermissions(false);
```

Learn about platform-specific permissions in the [iOS SDK documentation](/sdk/ios#request-permissions) and [Android SDK documentation](/sdk/android#request-permissions).

  </TabItem>

</Tabs>

### Step 5: Change the UI when the user is in a geofence

Call `Radar.trackOnce()` to track the user's location in the foreground. In the callback, check `user.geofences` to determine if the user is in a store, then change the UI to show the in-store experience.

<Tabs
  groupId="initialize"
  defaultValue="swift"
  values={[
    { label: 'Swift', value: 'swift' },
    { label: 'Kotlin', value: 'kotlin' },
    { label: 'Web', value: 'web' },
    { label: 'React Native', value: 'react-native' },
    { label: 'Flutter', value: 'flutter' }
  ]}
>

  <TabItem value="swift">

```swift
Radar.trackOnce { (status, location, events, user) in
  let isInStore = user?.geofences?.contains { $0.tag == "store" }
  if isInStore {
    // show in-store mode
  }
}
```

  </TabItem>
  <TabItem value="kotlin">

```kotlin
Radar.trackOnce { status, location, events, user ->
  val isInStore = user?.geofences?.any { geofence.tag == "store" }
  if (isInStore) {
    // show in-store mode
  }
}
```

  </TabItem>
  <TabItem value="web">

```javascript
Radar.trackOnce().then((result) => {
  const { user } = result;
  for (const geofence of user.geofences) {
    if (geofence.tag === 'store') {
      // show in-store mode
    }
  }
}).catch((err) => {
  // handle error
});
```

  </TabItem>
  <TabItem value="react-native">

```javascript
Radar.trackOnce().then((result) => {
  const { user } = result;
  for (const geofence of user.geofences) {
    if (geofence.tag === 'store') {
      // show in-store mode
    }
  }
}).catch((err) => {
  // handle error
});
```

  </TabItem>
  <TabItem value="flutter">

```dart
var result = await Radar.trackOnce();
var { user } = result;
bool isInStore = user?.geofences?.any((geofence) => geofence.tag == 'store');
if (isInStore) {
  // show in-store mode
}
```

  </TabItem>

</Tabs>

## Support

Have questions or feedback on this documentation? Let us know! Email us at [support@radar.com](mailto:support@radar.com).



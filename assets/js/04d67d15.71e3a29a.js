"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7306],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return f}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),u=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(t),f=r,m=p["".concat(l,".").concat(f)]||p[f]||d[f]||i;return t?a.createElement(m,o(o({ref:n},c),{},{components:t})):a.createElement(m,o({ref:n},c))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=p;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=t[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},8215:function(e,n,t){var a=t(7294);n.Z=function(e){var n=e.children,t=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},n)}},1395:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(7294),r=t(944),i=t(6010),o="tabItem_1uMI",s="tabItemActive_2DSg";var l=function(e){var n,t=e.lazy,l=e.block,u=e.defaultValue,c=e.values,d=e.groupId,p=e.className,f=a.Children.toArray(e.children),m=null!=c?c:f.map((function(e){return{value:e.props.value,label:e.props.label}})),g=null!=u?u:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value,k=(0,r.Z)(),y=k.tabGroupChoices,h=k.setTabGroupChoices,v=(0,a.useState)(g),b=v[0],w=v[1],N=[];if(null!=d){var S=y[d];null!=S&&S!==b&&m.some((function(e){return e.value===S}))&&w(S)}var C=function(e){var n=e.currentTarget,t=N.indexOf(n),a=m[t].value;w(a),null!=d&&(h(d,a),setTimeout((function(){var e,t,a,r,i,o,l,u;(e=n.getBoundingClientRect(),t=e.top,a=e.left,r=e.bottom,i=e.right,o=window,l=o.innerHeight,u=o.innerWidth,t>=0&&i<=u&&r<=l&&a>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(s),setTimeout((function(){return n.classList.remove(s)}),2e3))}),150))},x=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=N.indexOf(e.target)+1;t=N[a]||N[0];break;case"ArrowLeft":var r=N.indexOf(e.target)-1;t=N[r]||N[N.length-1]}null==(n=t)||n.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":l},p)},m.map((function(e){var n=e.value,t=e.label;return a.createElement("li",{role:"tab",tabIndex:b===n?0:-1,"aria-selected":b===n,className:(0,i.Z)("tabs__item",o,{"tabs__item--active":b===n}),key:n,ref:function(e){return N.push(e)},onKeyDown:x,onFocus:C,onClick:C},null!=t?t:n)}))),t?(0,a.cloneElement)(f.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==b})}))))}},9443:function(e,n,t){var a=(0,t(7294).createContext)(void 0);n.Z=a},944:function(e,n,t){var a=t(7294),r=t(9443);n.Z=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e}},970:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(7294),r="alert_19nB",i="alertWarning_1tiz",o="alertInfo_1EfW",s="alertSuccess_7EZp",l=function(e){var n=e.children,t=e.alertType;return"warning"===t?a.createElement("div",{className:"alert "+r+" "+i,role:"alert"},n):"info"===t?a.createElement("div",{className:"alert "+r+" "+o,role:"alert"},n):"success"===t?a.createElement("div",{className:"alert "+r+" "+s,role:"alert"},n):null}},1535:function(e,n,t){var a=t(7294),r=t(944);n.Z=function(e){e.test;var n=e.groupId,t=e.value,i=e.children,o=(0,r.Z)(),s=o.tabGroupChoices,l=(o.setTabGroupChoices,s[n]);return null!=n&&l==t?a.createElement("span",null,i):""}},3604:function(e,n,t){var a=t(7294),r=t(944);n.Z=function(e){e.groupId;var n=e.children,t=(0,r.Z)();t.tabGroupChoices,t.setTabGroupChoices;return a.createElement("span",null,n)}},3441:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return d},toc:function(){return p},default:function(){return m}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),o=t(970),s=t(1395),l=t(8215),u=(t(3604),t(1535),{sidebar_position:8,title:"Fraud",id:"fraud"}),c=void 0,d={unversionedId:"fraud",id:"fraud",isDocsHomePage:!1,title:"Fraud",description:"Fraud is available on the { }",source:"@site/docs/fraud.mdx",sourceDirName:".",slug:"/fraud",permalink:"/documentation/fraud",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/fraud.mdx",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,title:"Fraud",id:"fraud"},sidebar:"defaultSidebar",previous:{title:"Beacons",permalink:"/documentation/beacons"},next:{title:"Overview",permalink:"/documentation/sdk"}},p=[{value:"How it works",id:"how-it-works",children:[]},{value:"Fraud flags",id:"fraud-flags",children:[]},{value:"Bypassing checks for testing",id:"bypassing-checks-for-testing",children:[]},{value:"Blocking users",id:"blocking-users",children:[]},{value:"Allowed states and countries",id:"allowed-states-and-countries",children:[]},{value:"Configuring SSL pinning",id:"configuring-ssl-pinning",children:[]},{value:"Verifying user locations",id:"verifying-user-locations",children:[]}],f={toc:p};function m(e){var n=e.components,t=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Fraud is available on the "," ",(0,i.kt)("a",{href:"https://radar.com/pricing",target:"_blank"},"Enterprise plan"),"."),(0,i.kt)("p",null,"Fraud detects GPS spoofing, proxy and VPN usage, and device tampering."),(0,i.kt)("p",null,"With ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"Regions"),", you can also detect a user's country and state and mark specific regions as allowed or denied to comply with regulations."),(0,i.kt)("img",{src:"https://images.ctfassets.net/f2vbu16fzuly/6XHQyOZGH04IYuQuyxNbBh/aefe353d1f7b62437b6d01a9c8db3dbd/fraud.svg",className:"hero-image"}),(0,i.kt)("p",null,"Together, Fraud and Regions provide the following user context:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "fraud": {\n    "passed": false,\n    "bypassed": false,\n    "verified": true,\n    "mocked": true,\n    "jumped": false,\n    "compromised": false,\n    "proxy": false,\n    "sharing": false\n  },\n  "country": {\n    "code": "US",\n    "name": "United States",\n    "flag": "\ud83c\uddfa\ud83c\uddf8",\n    "allowed": true\n  },\n  "state": {\n    "code": "MD",\n    "name": "Maryland",\n    "allowed": false\n  }\n}\n')),(0,i.kt)("h2",{id:"how-it-works"},"How it works"),(0,i.kt)("p",null,"You can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce()")," to accurately detect a user's current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/geofences"},"geofences"),", current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/places"},"place"),", or current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"country and state"),"."),(0,i.kt)("p",null,"However, users can spoof a device's location. For example, a gambling app user may spoof their location to access sports betting features only available in specific states. Or, a retail app user may spoof their location to access offers only available inside a store geofence."),(0,i.kt)("p",null,"To ensure you can trust a user's location, you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," instead. Radar will collect a variety of fraud signals and perform fraud checks, exposing flags that you can use for fraud detection and location verification in your app."),(0,i.kt)("h2",{id:"fraud-flags"},"Fraud flags"),(0,i.kt)("p",null,"If you call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),", Radar exposes the following flags in ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"mocked")),": Indicates whether a user's location is being mocked, such as in a simulator or using a location spoofing app (e.g., ",(0,i.kt)("a",{parentName:"li",href:"https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en_US&gl=US"},"Fake GPS location"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"compromised")),": Indicates whether the user's device or app has been compromised according to the ",(0,i.kt)("a",{parentName:"li",href:"https://developer.android.com/google/play/integrity"},"Play Integrity API")," on Android"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"jumped")),': Indicates whether the user moved too far too fast (e.g., "jumped" across the country in only a few seconds)'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"sharing")),": Indicates whether the user is screen sharing (e.g., using ",(0,i.kt)("a",{parentName:"li",href:"https://www.teamviewer.com/en-us/"},"TeamViewer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"proxy")),": Indicates whether the user's IP address is a known proxy, VPN, Tor exit node, etc."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"verified")),": Indicates whether the request was made with ",(0,i.kt)("a",{parentName:"li",href:"#configuring-ssl-pinning"},"SSL pinning configured successfully"))),(0,i.kt)("p",null,"While you can work with individual flags, Radar also exposes a single ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed")," flag that indicates whether all fraud checks passed."),(0,i.kt)("h2",{id:"bypassing-checks-for-testing"},"Bypassing checks for testing"),(0,i.kt)("p",null,"If desired, you can bypass fraud checks for individual users using the ",(0,i.kt)("em",{parentName:"p"},"Mark as Bypassed")," button on the user detail page."),(0,i.kt)("p",null,"If a user is marked as bypassed, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.bypassed = true")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed = true"),", regardless of whether the user passes fraud checks."),(0,i.kt)("h2",{id:"blocking-users"},"Blocking users"),(0,i.kt)("p",null,"You can also manually block a user using the ",(0,i.kt)("em",{parentName:"p"},"Mark as Blocked")," button on the user detail page."),(0,i.kt)("p",null,"If a user is blocked, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.blocked = true")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed = false"),", regardless of whether the user passes fraud checks."),(0,i.kt)("h2",{id:"allowed-states-and-countries"},"Allowed states and countries"),(0,i.kt)("p",null,"With ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"Regions"),", you can mark specific states and countries as allowed or denied to comply with regulations. For example, a gambling app may only be allowed to operate in specific states."),(0,i.kt)("p",null,"If you call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),", Radar exposes your settings in ",(0,i.kt)("inlineCode",{parentName:"p"},"user.country.allowed")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.state.allowed"),"."),(0,i.kt)("h2",{id:"configuring-ssl-pinning"},"Configuring SSL pinning"),(0,i.kt)("p",null,"To prevent man-in-the-middle attacks, you should configure SSL pinning before calling ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),"."),(0,i.kt)("p",null,"On iOS, add the following to your ",(0,i.kt)("inlineCode",{parentName:"p"},"Info.plist")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<key>NSAppTransportSecurity</key>\n<dict>\n    <key>NSAllowsArbitraryLoads</key>\n    <false/>\n    <key>NSPinnedDomains</key>\n    <dict>\n        <key>api-verified.radar.io</key>\n        <dict>\n            <key>NSIncludesSubdomains</key>\n            <true/>\n            <key>NSPinnedLeafIdentities</key>\n            <array>\n                <dict>\n                    <key>SPKI-SHA256-BASE64</key>\n                    <string>15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</string>\n                </dict>\n                <dict>\n                    <key>SPKI-SHA256-BASE64</key>\n                    <string>15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</string>\n                </dict>\n            </array>\n        </dict>\n    </dict>\n</dict>\n")),(0,i.kt)("p",null,"Learn more about ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/news/?id=g9ejcf8y"},"SSL pinning on iOS"),"."),(0,i.kt)("p",null,"On Android, add a ",(0,i.kt)("inlineCode",{parentName:"p"},"res/xml/network_security_config.xml")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8"?>\n<network-security-config>\n    <domain-config cleartextTrafficPermitted="false">\n        <domain includeSubdomains="true">api-verified.radar.io</domain>\n        <pin-set>\n            <pin digest="SHA-256">15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</pin>\n            <pin digest="SHA-256">15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</pin>\n        </pin-set>\n    </domain-config>\n</network-security-config>\n')),(0,i.kt)("p",null,"Learn more about ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/training/articles/security-config"},"Network Security Configuration on Android"),"."),(0,i.kt)("h2",{id:"verifying-user-locations"},"Verifying user locations"),(0,i.kt)("p",null,"Client-side, you can verify a user's location with just a few lines of code:"),(0,i.kt)(s.Z,{groupId:"fraud",defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Kotlin",value:"kotlin"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"Radar.trackVerified { (status, location, events, user) in\n    if user?.fraud?.passed == true &&\n        user?.country?.allowed == true &&\n        user?.state?.allowed == true {\n        // allow access to feature\n    } else {\n        // deny access to feature\n    }\n}\n"))),(0,i.kt)(l.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"Radar.trackVerified { status, location, events, user ->\n    if (user?.fraud?.passed == true &&\n        user.country?.allowed == true &&\n        user.state?.allowed == true) {\n        // allow access to feature\n    } else {\n        // deny access to feature        \n    }\n}\n")))),(0,i.kt)("p",null,"Fraud is not yet supported with ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.startTracking()"),"."),(0,i.kt)("p",null,"Server-side, you can also ",(0,i.kt)("a",{parentName:"p",href:"/documentation/api#get-a-user"},"get a user")," and check fraud flags server-side for an additional layer of verification:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'curl "https://api.radar.io/v1/users/56db1f4613012711002229f4" \\\n  -H "Authorization: prj_live_sk_..."\n')))}m.isMDXComponent=!0},6010:function(e,n,t){function a(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function r(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(r&&(r+=" "),r+=n);return r}t.d(n,{Z:function(){return r}})}}]);
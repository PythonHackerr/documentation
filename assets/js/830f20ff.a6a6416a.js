"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[863],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(t),m=r,b=u["".concat(l,".").concat(m)]||u[m]||c[m]||o;return t?a.createElement(b,i(i({ref:n},d),{},{components:t})):a.createElement(b,i({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},970:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(7294),r="alert_19nB",o="alertWarning_1tiz",i="alertInfo_1EfW",s="alertSuccess_7EZp",l=function(e){var n=e.children,t=e.alertType;return"warning"===t?a.createElement("div",{className:"alert "+r+" "+o,role:"alert"},n):"info"===t?a.createElement("div",{className:"alert "+r+" "+i,role:"alert"},n):"success"===t?a.createElement("div",{className:"alert "+r+" "+s,role:"alert"},n):null}},960:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return u}});var a=t(7462),r=t(3366),o=(t(7294),t(3905)),i=t(970),s={sidebar_position:6,title:"Beacons",id:"beacons"},l=void 0,p={unversionedId:"beacons",id:"beacons",isDocsHomePage:!1,title:"Beacons",description:"Beacons is available on the { }",source:"@site/docs/beacons.mdx",sourceDirName:".",slug:"/beacons",permalink:"/documentation/beacons",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/beacons.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"Beacons",id:"beacons"},sidebar:"defaultSidebar",previous:{title:"DMAs",permalink:"/documentation/regions/dmas"},next:{title:"Trip Tracking",permalink:"/documentation/trip-tracking"}},d=[{value:"How it works",id:"how-it-works",children:[{value:"Ranging by UUID only",id:"ranging-by-uuid-only",children:[]}]},{value:"Create beacons",id:"create-beacons",children:[{value:"Dashboard",id:"dashboard",children:[]},{value:"CSV import",id:"csv-import",children:[]},{value:"API",id:"api",children:[]}]}],c={toc:d};function u(e){var n=e.components,t=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)(i.Z,{alertType:"info",mdxType:"Alert"},"Beacons is available on the "," ",(0,o.kt)("a",{href:"https://radar.com/pricing",target:"_blank"},"Enterprise plan"),"."),(0,o.kt)("p",null,"Beacons detects nearby Bluetooth beacons. Beacons are like hardware-enabled micro-geofences, accurate down to a few meters. For example, you might create a store-level ",(0,o.kt)("a",{parentName:"p",href:"/geofences"},"geofence")," and monitor beacons installed at the entrance, in the drive-thru, on registers, on tables, in aisles, or in parking spaces at each store."),(0,o.kt)("img",{src:"https://images.ctfassets.net/f2vbu16fzuly/tU9ITnOkNzy0wPUmepuIR/bcb4292390be1641b2ab80fa488f9d11/beacons.svg",className:"hero-image"}),(0,o.kt)("p",null,"Beacons provides the following user context:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  beacons: [\n    {\n      type: "ibeacon",\n      uuid: "b9407f30-f5f8-466e-aff9-25556b57fe6d",\n      major: "100",\n      minor: "1",\n      description: "Store #123 - Register #1",\n      tag: "store-register",\n      externalId: "123-1",\n      enabled: true\n    },\n    {\n      type: "eddystone",\n      uid: "f7826da6bc5b71e0893e",\n      instance: "4456384b726a",\n      description: "Store #123 - Aisle A",\n      tag: "store-aisle",\n      externalId: "123-A",\n      enabled: true\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"Beacons also provides the following events:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.entered_beacon")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.exited_beacon"))),(0,o.kt)("p",null,"You can receive events client-side via the ",(0,o.kt)("a",{parentName:"p",href:"/sdk"},"SDK")," or server-side via ",(0,o.kt)("a",{parentName:"p",href:"/integrations"},"event integrations"),", including webhooks."),(0,o.kt)("h2",{id:"how-it-works"},"How it works"),(0,o.kt)("p",null,"Beacon detection works on iOS and Android in the foreground and in the background. After you import beacons, Radar will sync nearby beacons to the SDK on every location update."),(0,o.kt)("p",null,"On iOS and Android, Radar can range any beacons compatible with ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/ibeacon/"},"iBeacon"),". On Android, the SDK can also range any beacons compatible with ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/google/eddystone"},"Eddystone-UID"),"."),(0,o.kt)("p",null,"Just like the Radar generates ",(0,o.kt)("inlineCode",{parentName:"p"},"user.entered_geofence")," events after you import ",(0,o.kt)("a",{parentName:"p",href:"/geofences"},"geofences"),", Radar will generate ",(0,o.kt)("inlineCode",{parentName:"p"},"user.entered_beacon")," events after you import beacons."),(0,o.kt)("p",null,"To range beacons, the user must grant location permissions. On Android, the user must also grant the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.android.com/about/versions/12/features/bluetooth-permissions#declare-new-permissions"},"required Bluetooth permissions"),". If the user grants foreground location permissions, you can range nearby beacons in the foreground by calling ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce(desiredAccuracy, beacons, completionHandler:)")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"beacons = true"),". If the user grants background location permissions, you can monitor beacons in the background by calling ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.startTracking()")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"trackingOptions.beacons = true"),". See the ",(0,o.kt)("a",{parentName:"p",href:"/sdk"},"SDK reference")," for more information."),(0,o.kt)("p",null,"Beacon entry and exit events are sent to the SDK, to ",(0,o.kt)("a",{parentName:"p",href:"/integrations#webhooks"},"webhooks"),", and to ",(0,o.kt)("a",{parentName:"p",href:"/integrations"},"integrations")," just like geofence entry and exit events."),(0,o.kt)("h3",{id:"ranging-by-uuid-only"},"Ranging by UUID only"),(0,o.kt)("p",null,"By default, Radar will sync nearby beacons to the SDK on every location update using the ",(0,o.kt)("inlineCode",{parentName:"p"},"coordinates")," specified for each beacon. The SDK will then range nearby beacons based on ",(0,o.kt)("inlineCode",{parentName:"p"},"uuid"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"major"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"minor")," for iBeacon or ",(0,o.kt)("inlineCode",{parentName:"p"},"uid")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"instance")," for Eddystone."),(0,o.kt)("p",null,"Alternatively, the SDK can range beacons based on ",(0,o.kt)("inlineCode",{parentName:"p"},"uuid")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"uid")," only, regardless of the ",(0,o.kt)("inlineCode",{parentName:"p"},"coordinates")," specified for each beacon. To enable this, set ",(0,o.kt)("em",{parentName:"p"},"iBeacon UUIDs")," and/or ",(0,o.kt)("inlineCode",{parentName:"p"},"Eddystone UIDs")," on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),", under ",(0,o.kt)("em",{parentName:"p"},"Beacons"),". On iOS, you must also enable the ",(0,o.kt)("em",{parentName:"p"},"Location updates")," ",(0,o.kt)("a",{parentName:"p",href:"/sdk/ios#background-modes"},"background mode"),"."),(0,o.kt)("h2",{id:"create-beacons"},"Create beacons"),(0,o.kt)("p",null,"You can create beacons via the dashboard, CSV import, or through the API. You can create beacons in the Test environment for development and testing, and in the Live environment for production."),(0,o.kt)("p",null,"Like ",(0,o.kt)("a",{parentName:"p",href:"/geofences"},"geofences"),", you also specify the metadata for beacons when you create them, including ",(0,o.kt)("em",{parentName:"p"},"tag")," (a group for the beacon, e.g., ",(0,o.kt)("inlineCode",{parentName:"p"},"store-register"),"), external ID (an external ID for the beacon that maps to your internal database, e.g., ",(0,o.kt)("inlineCode",{parentName:"p"},"123-1"),"), ",(0,o.kt)("em",{parentName:"p"},"description")," (a display name for the beacon, e.g., ",(0,o.kt)("inlineCode",{parentName:"p"},"Store #123 - Register #1"),")."),(0,o.kt)("p",null,"You also specify the identifiers used to range the beacon, including ",(0,o.kt)("inlineCode",{parentName:"p"},"uuid"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"major"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"minor")," for iBeacon or ",(0,o.kt)("inlineCode",{parentName:"p"},"uid")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"instance")," for Eddystone, as well as an approximate latitude and longitude used to sync nearby beacons (within 1 kilometer) to the SDK."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Beacons should be uniquely referenced by tag and external ID, assigned by you when a beacon is created. To disable or rotate identifiers for a beacon, re-import the beacon with the same tag and external ID.")),(0,o.kt)("h3",{id:"dashboard"},"Dashboard"),(0,o.kt)("p",null,"To create a beacon via the dashboard, go to the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/beacons"},"Beacons page")," and click the ",(0,o.kt)("em",{parentName:"p"},"New")," button. Optionally search for an address or place, then enter a type, tag, external ID, UUID, major, minor, and optional metadata. Click ",(0,o.kt)("em",{parentName:"p"},"Create")," to create the beacon."),(0,o.kt)("h3",{id:"csv-import"},"CSV import"),(0,o.kt)("p",null,"To import beacons via CSV import, go to the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/beacons"},"Beacons page")," and click the ",(0,o.kt)("em",{parentName:"p"},"Import")," button. Then, select a CSV to upload."),(0,o.kt)(i.Z,{alertType:"info",mdxType:"Alert"},"Headers are required as the first row of the CSV."),(0,o.kt)("p",null,"The CSV may have the following columns:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"description"))," (string, required): A display name for the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"tag"))," (string, optional): A group for the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"externalId"))," (string, optional): An external ID for the beacon that maps to your internal database."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"type"))," (string, required): The type of beacon, one of ",(0,o.kt)("inlineCode",{parentName:"li"},"ibeacon")," (supported on iOS and Android) or ",(0,o.kt)("inlineCode",{parentName:"li"},"eddystone")," (supported on Android only)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"uuid"))," (string, required for ",(0,o.kt)("inlineCode",{parentName:"li"},"ibeacon"),"): For iBeacons, the UUID of the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"major"))," (string, required for ",(0,o.kt)("inlineCode",{parentName:"li"},"ibeacon"),"): For iBeacons, the major ID of the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"minor"))," (string, required for ",(0,o.kt)("inlineCode",{parentName:"li"},"ibeacon"),"): For iBeacons, the minor ID of the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"uid"))," (string, required for ",(0,o.kt)("inlineCode",{parentName:"li"},"eddystone"),"): For Eddystone beacons, the UID of the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"instance"))," (string, required for ",(0,o.kt)("inlineCode",{parentName:"li"},"eddystone"),"): For Eddystone beacons, the instance ID of the beacon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"coordinates"))," (array, required): The approximate location of the beacon, used to sync nearby beacons (within 1 kilometer) to the SDK. A JSON string in the format ",(0,o.kt)("inlineCode",{parentName:"li"},"[longitude,latitude]"),". ",(0,o.kt)("strong",{parentName:"li"},"Note that longitude comes before latitude, a GeoJSON convention.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"enabled"))," (boolean, required): If true, the beacon will generate events. If false, the beacon will not generate events."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"metadata"))," (dictionary, optional): A set of custom key-value pairs for the beacon. A JSON string representing a dictionary with up to 16 keys and values of type string, boolean, or number.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"If a beacon with the specified tag and external ID already exists, it will be updated. If not, it will be created.")),(0,o.kt)("p",null,"For example, to import beacons installed on registers and in parking spaces at a store, you could use the following CSV:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'description,tag,externalId,type,uuid,major,minor,uid,instance,coordinates,enabled,metadata\n"Store #123 - Register #1",store-register,123-1,ibeacon,"b9407f30-f5f8-466e-aff9-25556b57fe6d",100,1,,,"[-73.975384,40.783747]",true,{}\n"Store #123 - Register #2",store-register,123-2,ibeacon,"c9407f30-f5f8-466e-aff9-25556B57fe6d",100,2,,,"[-73.975384,40.783747]",true,{}\n"Store #123 - Parking Space #1",store-parking,123-1,ibeacon,"d9407f30-f5f8-466e-aff9-25556b57fe6d",101,1,,,"[-73.975363,40.783826]",true,{}\n"Store #123 - Parking Space #2",store-parking,123-2,ibeacon,"e9407f30-f5f8-466e-aff9-25556b57fe6d",101,2,,,"[-73.975363,40.783826]",true,"{""type"":""parking""}"\n"Store #123 - Aisle A",store-aisle,123-A,eddystone,,,,"f7826da6bc5b71e0893e","4456384b726a","[-73.974317,40.785541]",true,{}\n"Store #123 - Aisle B",store-aisle,123-B,eddystone,,,,"f7826da6bc5b71e0893e","4456384b726b","[-73.974317,40.785541]",true,{}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Again, note that longitude comes before latitude, a GeoJSON convention.")),(0,o.kt)("p",null,"You can find a history of past imports on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/beacons/imports"},"Beacons import history page"),"."),(0,o.kt)("h3",{id:"api"},"API"),(0,o.kt)("p",null,"You can also create beacons programmatically via the ",(0,o.kt)("a",{parentName:"p",href:"/api"},"API"),". You can create a beacon via ",(0,o.kt)("span",{className:"badge badge--info"},"POST")," ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/v1/beacons"),", or upsert a beacon based on tag and external ID via ",(0,o.kt)("span",{className:"badge badge--warning"},"PUT")," ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/v1/beacons/:tag/:externalId"),"."),(0,o.kt)("p",null,"For example, to upsert a beacon within a store via the ",(0,o.kt)("a",{parentName:"p",href:"/api"},"API"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl "https://api.radar.io/v1/beacons/drive-thru/store123-beacon-1" \\\n    -H "Authorization: prj_live_sk_..." \\\n    -X PUT \\\n    -d "description=Store #123 - Register #1" \\\n    -d "tag=store-register" \\\n    -d "tag=123-1" \\\n    -d "type=ibeacon" \\\n    -d "uuid=b9407f30-f5f8-466e-aff9-25556b57fe6d" \\\n    -d "major=100" \\\n    -d "minor=1" \\\n    -d "coordinates=[-73.975384,40.783747]" \\\n    -d "enabled=true"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Again, note that longitude comes before latitude, a GeoJSON convention.")))}u.isMDXComponent=!0}}]);
<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-83017101-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Documentation | Radar" href="/documentation/opensearch.xml">
<script src="/documentation/js/fullstory.js" async></script><title data-react-helmet="true">Documentation - Building better location permission gathering | Radar</title><meta data-react-helmet="true" property="og:url" content="https://radar.com/documentation/tutorials/building-better-location-permission-gathering"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="description" content="Location data infrastructure | Geofencing SDK and API"><meta data-react-helmet="true" name="fb:app_id" content="1026503440803301"><meta data-react-helmet="true" name="og:site_name" content="Radar"><meta data-react-helmet="true" name="og:type" content="website"><meta data-react-helmet="true" name="og:description" content="Location data infrastructure | Geofencing SDK and API"><meta data-react-helmet="true" name="og:image" content="https://radar.com/static/image/logo-social.png"><meta data-react-helmet="true" name="og:image:url" content="https://radar.com/static/image/logo-social.png"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:site" content="@radarlabs"><meta data-react-helmet="true" name="twitter:image" content="https://radar.com/static/image/logo.png"><meta data-react-helmet="true" name="twitter:description" content="Location data infrastructure | Geofencing SDK and API"><meta data-react-helmet="true" property="og:title" content="Building better location permission gathering"><meta data-react-helmet="true" property="twitter:title" content="Building better location permission gathering"><link data-react-helmet="true" rel="shortcut icon" href="/documentation/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://radar.com/documentation/tutorials/building-better-location-permission-gathering"><link data-react-helmet="true" rel="alternate" href="https://radar.com/documentation/tutorials/building-better-location-permission-gathering" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://radar.com/documentation/tutorials/building-better-location-permission-gathering" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://HNJN02FL1I-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/documentation/assets/css/styles.ed350957.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.9d141e8b.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.ebf89355.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/logo.svg" alt="Radar" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/documentation/img/logo.svg" alt="Radar" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><a href="https://radar.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://radar.com/contact" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact Sales</a><a href="https://radar.com/login" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_2Fju" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_3jCp fs-unmask"><nav class="menu thin-scrollbar menu_1DcY menuWithAnnouncementBar_3IKd"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/documentation/">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Geofencing Platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Maps Platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">SDK Reference</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/documentation/api">API Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/building-an-on-premise-mode">Building an on-premise mode</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/showing-a-notification-when-a-user-enters-a-geofence">Showing a notification when a user enters a geofence</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/building-an-app-with-location-enabled-curbside-pickup">Building an app with location-enabled curbside pickup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/building-a-delivery-tracking-app">Building a delivery tracking app</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/building-a-store-locator-on-ios">Building a store locator on iOS</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/localizing-a-website-based-on-current-country-or-city">Localizing a website based on current country or city</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/logging-and-analyzing-where-conversions-occur">Logging and analyzing where conversions occur</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/tutorials/migrate-from-google-maps">Migrating from Google Maps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/tutorials/building-better-location-permission-gathering">Building better location permission gathering</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/documentation/waypoint">Waypoint</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/documentation/faqs">FAQs</a></li><li class="menuFooter_2WBS"><a class="menuHomeButton_19K4" href="https://radar.com">Back to radar.com</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row fs-unmask"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_Ftrd"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Building better location permission gathering</h1></header><p>This tutorial will guide you on using Radar&#x27;s location permission manager to build a best-in-class user interface for collecting on-device location with the Radar <a href="/documentation/sdk/ios">iOS SDK</a> and <a href="/documentation/sdk/android">Android SDK</a>. Achieving high opt-in rates for location permission helps your app deliver more value to users with location-based features.</p><p>While iOS and Android expose their own location permission APIs, using them directly can be confusing and clunky. We provide a comprehensive location permission management system that not only wraps the OS features but also offers advanced state management, tracking, and information collection through various channels. This system offers developers a clean and easy interface to streamline their location permission gathering UI flow while leveraging powerful underlying capabilities.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="languages-used"></a>Languages used<a class="hash-link" href="#languages-used" title="Direct link to heading">#</a></h2><ul><li>Swift</li><li>Kotlin</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="features-used"></a>Features used<a class="hash-link" href="#features-used" title="Direct link to heading">#</a></h2><ul><li><a href="/documentation/sdk/ios">iOS SDK</a></li><li><a href="/documentation/sdk/android">Android SDK</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="steps"></a>Steps<a class="hash-link" href="#steps" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-1-sign-up-for-radar"></a>Step 1: Sign up for Radar<a class="hash-link" href="#step-1-sign-up-for-radar" title="Direct link to heading">#</a></h3><p>If you haven&#x27;t already, sign up for a Radar account to get your API key, which is required to initialize the SDK. The location-permission functionality is provided without limit, free of charge. You can also create up to 1,000 geofences, track 1,000 users, and make 100,000 API calls per month.</p><a href="https://radar.com/signup" target="_blank" rel="noopener noreferrer" class="btn btn-large btn-primary">Get API keys</a><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-2-install-the-radar-ios-sdk"></a>Step 2: Install the Radar iOS SDK<a class="hash-link" href="#step-2-install-the-radar-ios-sdk" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="ios"></a>iOS<a class="hash-link" href="#ios" title="Direct link to heading">#</a></h4><p>If you&#x27;re starting from scratch, create a new Xcode project of type Single View App.</p><p><a href="/documentation/sdk/ios#install-sdk">Install the iOS SDK</a> using CocoaPods or SPM (recommended) or by <a href="https://github.com/radarlabs/radar-sdk-ios/releases" target="_blank" rel="noopener noreferrer">downloading the framework</a> and dragging it into your project.</p><p>Initialize the SDK in your <code>App</code> struct with your publishable API key.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">import SwiftUI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import RadarSDK</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@main</span></span><span class="token-line" style="color:#393A34"><span class="token plain">struct ExampleApp: App {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    init(){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Radar.initialize(publishableKey: &quot;prj_test_pk...&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some Scene {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        WindowGroup {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ContentView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="android"></a>Android<a class="hash-link" href="#android" title="Direct link to heading">#</a></h4><p>The best way to add the SDK to your project is via Gradle. See the <a href="/documentation/sdk/android#install-sdk">Android SDK installation guide</a>.</p><p>When your app starts, in application <code>onCreate()</code>, initialize the SDK with your publishable API key.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">import io.radar.sdk.Radar</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class MyApplication : Application() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onCreate() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.onCreate()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        val receiver = MyRadarReceiver { context, status -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            updateUI(status)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Radar.initialize(this, &quot;prj_test_pk...&quot;, receiver, Radar.RadarLocationServicesProvider.GOOGLE, true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-3-implement-your-listeners"></a>Step 3: Implement your listeners<a class="hash-link" href="#step-3-implement-your-listeners" title="Direct link to heading">#</a></h3><p>Link the SDK to your own state/navigation management logic by implementing <code>RadarDelegates</code>/<code>RadarReceiver</code>. The radar SDK will send updates on location permission status to your application’s state/navigation management logic via <code>RadarLocationPermissionStatus</code> objects. </p><p>You can also get up to date <code>RadarLocationPermissionStatus</code> objects with <code>Radar.getLocationPermissionStatus()</code>.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">import Foundation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import CoreLocation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import RadarSDK</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class PermissionManager: NSObject, RadarDelegate, ObservableObject  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Published var viewState:RadarLocationPermissionState</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private override init() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        viewState = RadarLocationPermissionState.NoPermissionGranted</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.init()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        viewState = Radar.getLocationPermissionStatus().locationPermissionState</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Radar.setDelegate(self)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didReceiveEvents(_ events: [RadarEvent], user: RadarUser?) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didUpdateLocation(_ location: CLLocation, user: RadarUser) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didUpdateClientLocation(_ location: CLLocation, stopped: Bool, source: RadarLocationSource){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didFail(status: RadarStatus) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didLog(message: String) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    func didUpdateClientLocationPermissionStatus(status: RadarLocationPermissionStatus) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        viewState = status.locationPermissionState</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    static let shared = PermissionManager()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">class MyRadarReceiver(private val onPermissionUpdated: (Context, RadarLocationPermissionStatus) -&gt; Unit)  : RadarReceiver() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onEventsReceived(context: Context, events: Array&lt;RadarEvent&gt;, user: RadarUser?) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onLocationUpdated(context: Context, location: Location, user: RadarUser) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onClientLocationUpdated(context: Context, location: Location, stopped: Boolean, source: Radar.RadarLocationSource) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onError(context: Context, status: Radar.RadarStatus) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onLog(context: Context, message: String) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       // do nothing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun onLocationPermissionStatusUpdated(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        context: Context,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        status: RadarLocationPermissionStatus</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onPermissionUpdated(context, status)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-4-implement-navigation-logic"></a>Step 4: Implement navigation logic<a class="hash-link" href="#step-4-implement-navigation-logic" title="Direct link to heading">#</a></h3><p>Navigate to the appropriate view via the enum field, <code>locationPermissionState</code>, exposed on <code>RadarLocationPermissionStatus</code>. Each enumeration will map to a specific view on your application. You may opt to map multiple states to the same view to simplify your own implementation.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">import SwiftUI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import CoreLocation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import RadarSDK</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">struct ContentView: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ObservedObject var permissionManager = PermissionManager.shared</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        NavigationView {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Group {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                switch permissionManager.viewState {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .NoPermissionGranted:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    GetForegroundPermissionStateView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .ForegroundPermissionPending:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    WaitingForForegroundPermissionView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .ForegroundPermissionRejected:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    GoToSettingsViewForegroundDenied()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .ForegroundPermissionGranted:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    GetBackgroundPermissionStateView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .BackgroundPermissionPending:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    WaitingForBackgroundPermissionView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .BackgroundPermissionRejected:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    GoToSettingsViewBackgroundDenied()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                case .BackgroundPermissionGranted:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    SuccessView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                default:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    GoToSettingsView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.NO_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_LOCATION_PENDING -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.BACKGROUND_PERMISSIONS_REJECTED_ONCE -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.APPROXIMATE_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.BACKGROUND_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_PERMISSIONS_REJECTED_ONCE -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_PERMISSIONS_REJECTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.BACKGROUND_PERMISSIONS_REJECTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        else -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // handle UI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="suggested-ui-views"></a>Suggested UI views<a class="hash-link" href="#suggested-ui-views" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="overview"></a>Overview:<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h3><p>Don&#x27;t approach requesting location permission as a linear UI flow. The state of location permission can change in various ways inside and outside the application. Build a robust UI that gracefully handles any state the app is in. The code in this tutorial presents a minimalistic UI for simplicity. You should enhance the provided template to develop a production-ready UI with additional features and polish.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="handling-foreground-permission"></a>Handling Foreground Permission:<a class="hash-link" href="#handling-foreground-permission" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="no_permissions_granted"></a><strong><code>NO_PERMISSIONS_GRANTED</code></strong>:<a class="hash-link" href="#no_permissions_granted" title="Direct link to heading">#</a></h4><p>If the application doesn&#x27;t have any permission, explain why you need foreground permission before allowing the user to grant them. Take users to a screen explaining the need for foreground permission, using verbiage similar to the system prompt. </p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct GetForegroundPermissionStateView: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        VStack {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Text(&quot;You currently have not granted any locaiton permission. To get foreground location permission, explain why you need them here.&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Button(&quot;Request Foreground Permission&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.requestForegroundLocationPermission()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }.navigationBarTitle(&quot;Get foreground&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    android:layout_width=&quot;match_parent&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    android:layout_height=&quot;match_parent&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    android:orientation=&quot;vertical&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    android:padding=&quot;16dp&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;TextView</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:id=&quot;@+id/titleTextView&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_width=&quot;match_parent&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_height=&quot;wrap_content&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:textSize=&quot;24sp&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:textStyle=&quot;bold&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;TextView</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:id=&quot;@+id/descriptionTextView&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_width=&quot;match_parent&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_height=&quot;wrap_content&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:textSize=&quot;16sp&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_marginTop=&quot;16dp&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Button</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:id=&quot;@+id/myButton&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_width=&quot;wrap_content&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_height=&quot;wrap_content&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:text=&quot;My Button&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        android:layout_marginTop=&quot;16dp&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/LinearLayout&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.NO_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.visibility = View.VISIBLE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            titleTextView.text = &quot;No Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            descriptionTextView.text = &quot;You have not granted any locations permission. We need your location for this demo&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.text = &quot;Grant foreground Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.setOnClickListener {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.requestForegroundLocationPermission()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="foreground_location_pending"></a><strong><code>FOREGROUND_LOCATION_PENDING</code></strong>:<a class="hash-link" href="#foreground_location_pending" title="Direct link to heading">#</a></h4><p>Optionally handle the waiting period while the permission popup is active. </p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct WaitingForForegroundPermissionView: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Text(&quot;Waiting for foreground permission&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .navigationBarTitle(&quot;Waiting&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_LOCATION_PENDING -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.visibility = View.GONE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            titleTextView.text = &quot;Pending Foreground Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            descriptionTextView.text = &quot;Waiting for permission.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="foreground_permissions_rejected"></a><strong><code>FOREGROUND_PERMISSIONS_REJECTED</code></strong>:<a class="hash-link" href="#foreground_permissions_rejected" title="Direct link to heading">#</a></h4><p>If foreground permission are not granted and essential for your application&#x27;s core functionality, you should guide the user through a process to enable the required permission in the device settings. Provide clear instructions and a straightforward way for the user to access the appropriate settings screen to grant the necessary foreground permission. </p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct GoToSettingsViewForegroundDenied: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        VStack {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Text(&quot;Go to settings, you cannot proceed without the  foreground permission&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Button(&quot;Open Settings&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.openAppSettings()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }.navigationBarTitle(&quot;Go to settings&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_PERMISSIONS_REJECTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.visibility = View.VISIBLE </span></span><span class="token-line" style="color:#393A34"><span class="token plain">            titleTextView.text = &quot;Rejected foreground Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            descriptionTextView.text = &quot;You have rejected foreground permission for good, please activate it in the settings.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.text = &quot;Go to settings to change it&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.setOnClickListener {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.openAppSettings()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="foreground_permissions_granted"></a><strong><code>FOREGROUND_PERMISSIONS_GRANTED</code></strong>:<a class="hash-link" href="#foreground_permissions_granted" title="Direct link to heading">#</a></h4><p>If foreground permission are granted, you have two options for requesting background permission:</p><ul><li><p>Promptly request background permission immediately after obtaining foreground permission. This proactive approach ensures background permission are acquired upfront.</p></li><li><p>Wait until the user attempts to use a feature or functionality that requires background permission before prompting for them. This just-in-time approach defers the permission request until it&#x27;s absolutely necessary.</p></li></ul><p>Choose the approach that aligns best with your application&#x27;s design and user experience goals.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="handling-background-permission"></a>Handling Background Permission:<a class="hash-link" href="#handling-background-permission" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="foreground_permissions_granted-1"></a><strong><code>FOREGROUND_PERMISSIONS_GRANTED</code></strong>:<a class="hash-link" href="#foreground_permissions_granted-1" title="Direct link to heading">#</a></h4><p>After foreground permission are granted, clearly explain to the user why your app requires background permission before prompting them to grant these permission. Consider using language similar to the operating system&#x27;s prompts to increase user understanding and buy-in. Keep in mind that an app can only request location background permission if foreground location permission have already been granted. The Radar SDK enforces these prerequisites and will handle the appropriate permission requests accordingly. </p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct GetBackgroundPermissionStateView: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        VStack {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Text(&quot;We have foregorund permission. To get background location permission, explain why you need them here&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Button(&quot;Request Background Permission&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.requestBackgroundLocationPermission()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }.navigationBarTitle(&quot;Get background&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.FOREGROUND_PERMISSIONS_GRANTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.visibility = View.VISIBLE </span></span><span class="token-line" style="color:#393A34"><span class="token plain">            titleTextView.text = &quot;Foreground Permission Granted&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            descriptionTextView.text = &quot;You have granted foreground permission. Please also grant background permission.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.text = &quot;Grant Background Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.setOnClickListener {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.requestBackgroundLocationPermission()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="background_location_pending"></a><strong><code>BACKGROUND_LOCATION_PENDING</code></strong>:<a class="hash-link" href="#background_location_pending" title="Direct link to heading">#</a></h4><p>Optionally handle the waiting period while the permission popup is active in iOS. Requesting background permission in android takes the user to the setting screen.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct WaitingForBackgroundPermissionView: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Text(&quot;Waiting for background permission&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .navigationBarTitle(&quot;Waiting&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="background_permissions_rejected"></a><strong><code>BACKGROUND_PERMISSIONS_REJECTED</code></strong>:<a class="hash-link" href="#background_permissions_rejected" title="Direct link to heading">#</a></h4><p>If permission are not granted, provide clear information on the limited functionality and a way to redirect users to the settings if needed. Note that you are not allowed to block users who do not grant background permission and you should offer users a way to proceed without background permission.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">struct GoToSettingsViewBackgroundDenied: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        VStack {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Text(&quot;Go to settings, you cannot proceed without the background permission&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Button(&quot;Open Settings&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.openAppSettings()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }.navigationBarTitle(&quot;Go to settings&quot;, displayMode: .inline)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private fun updateUI(state: RadarLocationPermissionStatus){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val titleTextView = findViewById&lt;TextView&gt;(R.id.titleTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val descriptionTextView = findViewById&lt;TextView&gt;(R.id.descriptionTextView)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val myButton = findViewById&lt;Button&gt;(R.id.myButton)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    when (state.status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        RadarLocationPermissionStatus.LocationPermissionState.BACKGROUND_PERMISSIONS_REJECTED -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.visibility = View.VISIBLE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            titleTextView.text = &quot;Rejected background Permission&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            descriptionTextView.text = &quot;You have rejected background permission for good, please activate it in the settings.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.text = &quot;Go to settings to change it&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            myButton.setOnClickListener {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Radar.openAppSettings()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="background_permissions_granted"></a><strong><code>BACKGROUND_PERMISSIONS_GRANTED</code></strong>:<a class="hash-link" href="#background_permissions_granted" title="Direct link to heading">#</a></h4><p>If permission are granted, proceed with location-based functionalities that require background access.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="platform-specific-states"></a>Platform specific states:<a class="hash-link" href="#platform-specific-states" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="android-1"></a>Android:<a class="hash-link" href="#android-1" title="Direct link to heading">#</a></h4><ul><li><strong><code>FOREGROUND_PERMISSIONS_REJECTED_ONCE</code></strong>: The user has rejected to provide foreground permission once. You can still request for foreground permission but you are strongly encouraged to provide additional justification for requesting the permission via the UI.</li><li><strong><code>APPROXIMATE_PERMISSIONS_GRANTED</code></strong>: Instead of granting <code>ACCESS_FINE_LOCATION</code>, the user has opted to grant <code>ACCESS_FINE_LOCATION</code> instead. You can still request for background permission but your foreground location tracking will be less accurate.</li><li><strong><code>BACKGROUND_PERMISSIONS_REJECTED_ONCE</code></strong>: The user has rejected to provide background permission once. You can still request for background permission but you are strongly encouraged to provide additional justification for requesting the permission via the UI.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="ios-1"></a>iOS<a class="hash-link" href="#ios-1" title="Direct link to heading">#</a></h4><ul><li><strong><code>PermissionRestricted</code></strong>: The operating system or the user has restricted the app from accessing location services. You should prompt the user to manually resolve this state.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h3><p>Using the Radar SDK can dramatically simplify your implementation of your applications location permission gathering UI. Start implementing best in class locations permission gathering UI with the Radar SDK.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="support"></a>Support<a class="hash-link" href="#support" title="Direct link to heading">#</a></h2><p>Have questions or feedback on this documentation? Let us know! Contact us at <a href="https://radar.com/support" target="_blank" rel="noopener noreferrer">radar.com/support</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/radarlabs/docs/edit/main/docs/tutorials/building-better-location-permission-gathering.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documentation/tutorials/migrate-from-google-maps"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Migrating from Google Maps</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documentation/waypoint"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Waypoint »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#languages-used" class="table-of-contents__link">Languages used</a></li><li><a href="#features-used" class="table-of-contents__link">Features used</a></li><li><a href="#steps" class="table-of-contents__link">Steps</a><ul><li><a href="#step-1-sign-up-for-radar" class="table-of-contents__link">Step 1: Sign up for Radar</a></li><li><a href="#step-2-install-the-radar-ios-sdk" class="table-of-contents__link">Step 2: Install the Radar iOS SDK</a></li><li><a href="#step-3-implement-your-listeners" class="table-of-contents__link">Step 3: Implement your listeners</a></li><li><a href="#step-4-implement-navigation-logic" class="table-of-contents__link">Step 4: Implement navigation logic</a></li></ul></li><li><a href="#suggested-ui-views" class="table-of-contents__link">Suggested UI views</a><ul><li><a href="#overview" class="table-of-contents__link">Overview:</a></li><li><a href="#handling-foreground-permission" class="table-of-contents__link">Handling Foreground Permission:</a></li><li><a href="#handling-background-permission" class="table-of-contents__link">Handling Background Permission:</a></li><li><a href="#platform-specific-states" class="table-of-contents__link">Platform specific states:</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></li><li><a href="#support" class="table-of-contents__link">Support</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/documentation/assets/js/runtime~main.9d141e8b.js"></script>
<script src="/documentation/assets/js/main.ebf89355.js"></script>
</body>
</html>